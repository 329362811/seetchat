<template name="29d87a90"><view class="_div data-v-55ad473c chat-container"><view wx:if="{{allConversation.length === 0}}" class="_div data-v-55ad473c empty"><button type="button" class="_button data-v-55ad473c empty-button" bindtap="handleProxy" data-eventid="{{'0'}}" data-comkey="{{$k}}">
      发起一段对话吧
    </button></view> <i-modal title="确认删除会话？" visible="{{modalVisible}}" bindok="handleProxy" bindcancel="handleProxy" data-eventid="{{'1'}}" data-comkey="{{$k}}" class="_i-modal data-v-55ad473c"></i-modal> <van-icon class="_van-icon data-v-55ad473c search-icon" name="search" bindtap="handleProxy" data-eventid="{{'2'}}" data-comkey="{{$k}}"></van-icon> <van-tabs line-width="10px" color="#FFFFFF" value="{{active}}" bindchange="handleProxy" animated data-eventid="{{'6'}}" data-comkey="{{$k}}" class="_van-tabs data-v-55ad473c"><van-tab title="消息" class="_van-tab data-v-55ad473c"><block wx:for="{{allConversation}}" wx:for-index="index" wx:for-item="item"><view class="_div data-v-55ad473c chat" wx:if="{{item.type === 'C2C'}}" key="{{item.conversationID}}" bindlongpress="handleProxy" bindtap="handleProxy" data-eventid="{{'5_'+index}}" data-comkey="{{$k}}"><view class="_div data-v-55ad473c avatar-container"><i-avatar src="{{item.userProfile.avatar || '/static/images/avatar.png'}}" i-class="avatar" class="_i-avatar data-v-55ad473c"></i-avatar></view> <view class="_div data-v-55ad473c right"><view class="_div data-v-55ad473c information"><view class="_div data-v-55ad473c username">{{item.userProfile.nick || item.userProfile.userID}}</view> <view class="_div data-v-55ad473c content" wx:if="{{!item.lastMessage.isRevoked}}">{{item.lastMessage.messageForShow}}</view><view class="_div data-v-55ad473c content" wx:else><block wx:if="{{myInfo.userID === item.lastMessage.fromAccount}}">你撤回了一条消息</block><block wx:else>{{item.lastMessage.fromAccount}}撤回了一条消息</block></view></view> <view class="_div data-v-55ad473c time"><view class="_div data-v-55ad473c last">{{item.lastMessage._lastTime}}</view> <view class="_div data-v-55ad473c remain" wx:if="{{item.unreadCount > 0}}"><label wx:if="{{item.unreadCount > 99}}" class="_span data-v-55ad473c info">99+</label><label wx:else class="_span data-v-55ad473c info">{{item.unreadCount}}</label></view></view></view></view><view class="_div data-v-55ad473c chat" wx:elif="{{item.type === 'GROUP'}}" bindtap="handleProxy" key="{{item.conversationID}}" bindlongpress="handleProxy" data-eventid="{{'3_'+index}}" data-comkey="{{$k}}"><view class="_div data-v-55ad473c avatar-container"><i-avatar src="{{item.groupProfile.avatar}}" i-class="avatar" class="_i-avatar data-v-55ad473c"></i-avatar></view> <view class="_div data-v-55ad473c right"><view class="_div data-v-55ad473c information"><view class="_div data-v-55ad473c username">{{item.groupProfile.name || item.groupProfile.groupID}}</view> <view class="_div data-v-55ad473c content" wx:if="{{!item.lastMessage.isRevoked}}"><block wx:if="{{item.lastMessage.fromAccount === '@TIM#SYSTEM'}}">{{item.lastMessage.messageForShow}}</block><block wx:else>{{item.lastMessage.fromAccount}}：{{item.lastMessage.messageForShow}}</block></view><view class="_div data-v-55ad473c content" wx:else><block wx:if="{{myInfo.userID === item.lastMessage.fromAccount}}">你撤回了一条消息</block><block wx:else>{{item.lastMessage.fromAccount}}撤回了一条消息</block></view></view> <view class="_div data-v-55ad473c time"><view class="_div data-v-55ad473c last">{{item.lastMessage._lastTime}}</view> <view class="_div data-v-55ad473c remain" wx:if="{{item.unreadCount > 0}}"><label wx:if="{{item.unreadCount > 99}}" class="_span data-v-55ad473c info">99+</label><label wx:else class="_span data-v-55ad473c info">{{item.unreadCount}}</label></view></view></view></view><view class="_div data-v-55ad473c chat" wx:elif="{{item.type === '@TIM#SYSTEM'}}" bindtap="handleProxy" key="{{item.conversationID}}" bindlongpress="handleProxy" data-eventid="{{'4_'+index}}" data-comkey="{{$k}}"><view class="_div data-v-55ad473c avatar-container"><image src="/static/images/system.png" class="_image data-v-55ad473c avatar"></image></view> <view class="_div data-v-55ad473c right"><view class="_div data-v-55ad473c information"><view class="_div data-v-55ad473c username">系统通知</view> <view class="_div data-v-55ad473c content">点击查看</view></view> <view class="_div data-v-55ad473c time"><view class="_div data-v-55ad473c last"></view> <view class="_div data-v-55ad473c remain" wx:if="{{item.unreadCount > 0}}"><label wx:if="{{item.unreadCount > 99}}" class="_span data-v-55ad473c info">99+</label><label wx:else class="_span data-v-55ad473c info">{{item.unreadCount}}</label></view></view></view></view></block></van-tab></van-tabs></view></template>